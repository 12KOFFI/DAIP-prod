!function($,c,d,e){var f="Lightboxed",a="lightboxed--";function b(a,b){jQuery.extend(this,{Obj:a,_name:f,_defaults:$.fn.lightboxed.defaults,options:jQuery.extend({},$.fn.lightboxed.defaults,b),uniq:"id"+new Date().getTime(),lightbox:{},cache:{},index:!1,touch:{},phantoms:{left:!1,right:!1}}),this.init()}function g(a){return{clientX:/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0].clientX:a.clientX,clientY:/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0].clientY:a.clientY,pageX:/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0].pageX:a.pageX,pageY:/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0].pageY:a.pageY,timestamp:Date.now()}}function h(a){(a=a||c.event).preventDefault&&a.preventDefault(),a.returnValue=!1}function i(a){if(({37:1,38:1,39:1,40:1})[a.keyCode])return h(a),!1}$.extend(b.prototype,{init:function(){var b=this;this.CacheObj=jQuery(d).find("#"+a+"cache").length>0?jQuery(d).find("#"+a+"cache"):jQuery('<div id="'+a+'cache" />').appendTo("body"),this.cache.container=jQuery('<div id="'+this.uniq+'" />').appendTo(this.CacheObj),this.cache.content=jQuery('<div class="'+a+'cached_content" />').appendTo(this.cache.container),this.Obj.length>1&&(this.cache.thumbs=jQuery('<div class="'+a+'cached_thumbs" />').appendTo(this.cache.container)),this.Obj.each(function(){b.addToCache(this)}),this.lightbox.container=jQuery(d).find("#"+a+"container").length>0?jQuery(d).find("#"+a+"container"):jQuery('<div id="'+a+'container" />').addClass(this.options.lightboxCloseClass).appendTo("body"),this.lightbox.stage=this.lightbox.container.find("#"+a+"stage").length>0?this.lightbox.container.find("#"+a+"stage"):jQuery('<div id="'+a+'stage" />').appendTo(this.lightbox.container),this.lightbox.content=this.lightbox.stage.find("#"+a+"content").length>0?this.lightbox.stage.find("#"+a+"content"):jQuery('<div id="'+a+'content" />').appendTo(this.lightbox.stage),this.lightbox.thumbs=this.lightbox.container.find("#"+a+"thumbs").length>0?this.lightbox.container.find("#"+a+"thumbs"):jQuery('<div id="'+a+'thumbs" />').appendTo(this.lightbox.stage),this.lightbox.close=this.lightbox.container.find("#"+a+"bttn_close").length>0?this.lightbox.container.find("#"+a+"bttn_close"):jQuery('<div id="'+a+'bttn_close" />').appendTo(this.lightbox.container),this.lightbox.prev=this.lightbox.container.find("#"+a+"bttn_prev").length>0?this.lightbox.container.find("#"+a+"bttn_prev"):jQuery('<div id="'+a+'bttn_prev" />').appendTo(this.lightbox.container),this.lightbox.next=this.lightbox.container.find("#"+a+"bttn_next").length>0?this.lightbox.container.find("#"+a+"bttn_next"):jQuery('<div id="'+a+'bttn_next" />').appendTo(this.lightbox.container),this.registerEvents("init")},addToCache:function(b){if((jQuery(b).attr("data-link")||jQuery(b).attr("href")||jQuery(b).attr("data-src")||jQuery(b).attr("src")).match("jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg|svg|SVG|tif|TIF|bmp|BMP"))var c=jQuery("<img />").attr("src",jQuery(b).attr("data-link")||jQuery(b).attr("href")||jQuery(b).attr("src")).attr("alt",jQuery(b).attr("alt")).attr("data-caption",jQuery(b).attr("data-caption"));else if((jQuery(b).attr("data-link")||jQuery(b).attr("href")).match("^#")&&jQuery(jQuery(b).attr("data-link")||jQuery(b).attr("href")).length>0)var c=jQuery(jQuery(b).attr("data-link")||jQuery(b).attr("href")).html();else var c=jQuery("<iframe />").attr("src",jQuery(b).attr("data-link")||jQuery(b).attr("href")).attr("width",jQuery(b).attr("data-width")).attr("height",jQuery(b).attr("data-height")).attr("allowfullscreen","true");jQuery('<div class="'+a+'frame" />').append(c).append(void 0!==jQuery(b).attr("data-caption")?jQuery('<div class="'+a+'caption" />').html(jQuery(b).attr("data-caption")):"").appendTo(this.cache.content),this.Obj.length>1&&jQuery('<div class="'+a+'thumb" />').append(jQuery('<div class="'+a+'thumb_border" />').append(jQuery("<img />").attr("src",jQuery(b).attr("data-src")||jQuery(b).attr("src")||jQuery(b).attr("data-link")||jQuery(b).attr("href")))).appendTo(this.cache.thumbs)},resizeContent:function(){var a=this;this.lightbox.content.width(jQuery(c).width()*this.lightbox.content.children().length).height(this.cache.thumbs?jQuery(c).height()-this.lightbox.thumbs.height():jQuery(c).height()).children().width(jQuery(c).width()-2*this.options.content.spacing).height(this.lightbox.content.height()),this.lightbox.content.children().each(function(b){jQuery(this).css("left",jQuery(c).width()*b+a.options.content.spacing)})},open:function(b,e){this.cache.thumbs&&!1!==this.options.thumbs&&(this.lightbox.thumbs.width((this.options.thumbs.size+this.options.thumbs.spacing)*this.cache.thumbs.children().length).height(this.options.thumbs.size+2*this.options.thumbs.spacing).html(this.cache.thumbs.clone(!0).html()).show().children().width(this.options.thumbs.size).height(this.options.thumbs.size).css("margin",this.options.thumbs.spacing+"px "+this.options.thumbs.spacing/2+"px"),this.registerEvents("thumbs"),this.lightbox.next.show(),this.lightbox.prev.show()),this.lightbox.content.html(this.cache.content.clone(!0).html()),this.lightbox.content.children().length>1&&!0==this.options.loop&&(this.phantoms={left:jQuery(this.lightbox.content.children().get(this.lightbox.content.children().length-1)).clone().addClass(a+"phantom-left").prependTo(this.lightbox.content),right:jQuery(this.lightbox.content.children().get(1)).clone().addClass(a+"phantom-right").appendTo(this.lightbox.content)}),this.resizeContent(),this.change(b,this.Obj.index(e)),this.registerEvents("lightbox"),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeIn(this.options.delay),c.addEventListener&&c.addEventListener("DOMMouseScroll",h,!1),c.onwheel=h,c.onmousewheel=d.onmousewheel=h,c.ontouchmove=h,d.onkeydown=i},close:function(a){var b=this;this.deregisterEvents(),this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeOut(this.options.delay,function(){b.lightbox.container.attr("style",""),b.lightbox.content.html("").attr("style",""),b.lightbox.thumbs.html("").attr("style","").hide(),b.lightbox.next.hide(),b.lightbox.prev.hide(),b.index=!1,c.removeEventListener&&c.removeEventListener("DOMMouseScroll",h,!1),c.onmousewheel=d.onmousewheel=null,c.onwheel=null,c.ontouchmove=null,d.onkeydown=null})},change:function(f,e){var g=this,d="number"==typeof e?e:jQuery(e).index();if(this.lightbox.content.children().length>1){var b=!0===this.options.loop?-(jQuery(c).width()*(d+1)):-(jQuery(c).width()*d);if(this.lightbox.content.css({"-webkit-transform":"translate("+b+"px,0)","-moz-transform":"translate("+b+"px,0)","-ms-transform":"translate("+b+"px,0)","-o-transform":"translate("+b+"px,0)",transform:"translate("+b+"px,0)",transition:this.options.delay+"ms transform"}),-1==d?(d=this.lightbox.content.children().length-3,setTimeout(function(){var a=-(jQuery(c).width()*(d+1));g.lightbox.content.css({"-webkit-transform":"translate("+a+"px,0)","-moz-transform":"translate("+a+"px,0)","-ms-transform":"translate("+a+"px,0)","-o-transform":"translate("+a+"px,0)",transform:"translate("+a+"px,0)",transition:"none"})},this.options.delay)):d==this.lightbox.content.children().length-2?(d=0,setTimeout(function(){var a=-(jQuery(c).width()*(d+1));g.lightbox.content.css({"-webkit-transform":"translate("+a+"px,0)","-moz-transform":"translate("+a+"px,0)","-ms-transform":"translate("+a+"px,0)","-o-transform":"translate("+a+"px,0)",transform:"translate("+a+"px,0)",transition:"none"})},this.options.delay)):setTimeout(function(){g.lightbox.content.css("transition","none")},this.options.delay),this.lightbox.content.children().removeClass(a+"active"),jQuery(this.lightbox.content.children().get(d+1)).addClass(a+"active"),this.lightbox.thumbs.children().removeClass(a+"active"),jQuery(this.lightbox.thumbs.children().get(d)).addClass(a+"active"),this.lightbox.thumbs.width()>jQuery(c).width()){var b=-(d*(this.options.thumbs.size+this.options.thumbs.spacing))-(this.options.thumbs.size+this.options.thumbs.spacing)/2;this.lightbox.thumbs.css({"-webkit-transform":"translate("+b+"px,0)","-moz-transform":"translate("+b+"px,0)","-ms-transform":"translate("+b+"px,0)","-o-transform":"translate("+b+"px,0)",transform:"translate("+b+"px,0)",transition:this.options.delay+"ms transform"})}}this.index=d},next:function(a){this.change(a,this.index+1)},prev:function(a){this.change(a,this.index-1)},startTouch:function(a,b){a.preventDefault(),this.touch={start:g(a),target:{x:parseFloat(b.css("transform").split(",")[4]),y:parseFloat(b.css("transform").split(",")[5])}}},endTouch:function(a,d){var e=this;a.preventDefault();var b={clientX:g(a).clientX-this.touch.start.clientX,clientY:g(a).clientY-this.touch.start.clientY,pageX:g(a).pageX-this.touch.start.pageX,pageY:g(a).pageY-this.touch.start.pageY,timestamp:g(a).timestamp-this.touch.start.timestamp};d==this.lightbox.content&&((b.clientX>0?b.clientX:-b.clientX)>jQuery(c).width()*this.options.swipe.horizontalOffset?b.clientX>0?this.prev(a):this.next(a):(this.lightbox.content.css({"-webkit-transform":"translate("+this.touch.target.x+"px,0)","-moz-transform":"translate("+this.touch.target.x+"px,0)","-ms-transform":"translate("+this.touch.target.x+"px,0)","-o-transform":"translate("+this.touch.target.x+"px,0)",transform:"translate("+this.touch.target.x+"px,0)",transition:this.options.delay+"ms transform"}),setTimeout(function(){e.lightbox.content.css("transition","none")},this.options.delay)),(b.clientY>0?b.clientY:-b.clientY)>jQuery(c).height()*this.options.swipe.verticalOffset?this.close(a):(this.lightbox.container.css({"-webkit-transform":"translate(0,0) scale(1)","-moz-transform":"translate(0,0) scale(1)","-ms-transform":"translate(0,0) scale(1)","-o-transform":"translate(0,0) scale(1)",transform:"translate(0,0) scale(1)",opacity:"1",transition:this.options.delay+"ms all"}),setTimeout(function(){e.lightbox.container.attr("style","display: block;")},this.options.delay)))},moveTouch:function(b,h){b.preventDefault();var a={clientX:g(b).clientX-this.touch.start.clientX,clientY:g(b).clientY-this.touch.start.clientY,pageX:g(b).pageX-this.touch.start.pageX,pageY:g(b).pageY-this.touch.start.pageY,timestamp:g(b).timestamp-this.touch.start.timestamp};if(h==this.lightbox.content&&(a.clientX>0?a.clientX:-a.clientX)>10){var e=this.touch.target.x+a.clientX;h.css({"-webkit-transform":"translate("+e+"px,0)","-moz-transform":"translate("+e+"px,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate("+e+"px,0)"})}if(h==this.lightbox.content&&(a.clientY>0?a.clientY:-a.clientY)>30){var f=0+a.clientY,d=(jQuery(c).height()-(a.clientY>0?a.clientY:-a.clientY))/jQuery(c).height();this.lightbox.container.css({"-webkit-transform":"translate(0,"+f+"px) scale("+d+")","-moz-transform":"translate(0,"+f+"px) scale("+d+")","-ms-transform":"translate(0,"+f+"px) scale("+d+")","-o-transform":"translate(0,"+f+"px) scale("+d+")",transform:"translate(0,"+f+"px) scale("+d+")",opacity:d})}},registerEvents:function(a){var b=this;"init"==a&&this.Obj.each(function(){jQuery(this).on("click",function(a){a.preventDefault(),b.open.call(b,a,this)})}),"lightbox"==a&&(this.lightbox.close.on("click",function(a){b.close.call(b,a)}),this.lightbox.next.on("click",function(a){b.next.call(b,a)}),this.lightbox.prev.on("click",function(a){b.prev.call(b,a)}),jQuery(c).on("resize",function(a){b.resizeContent.call(b,a)}),this.lightbox.content.on("touchstart",function(a){b.startTouch.call(b,a,b.lightbox.content)}),this.lightbox.content.on("touchend",function(a){b.endTouch.call(b,a,b.lightbox.content)}),this.lightbox.content.on("touchmove",function(a){b.moveTouch.call(b,a,b.lightbox.content)})),"thumbs"==a&&(this.lightbox.thumbs.children().on("click",function(a){b.change.call(b,a,this)}),this.lightbox.thumbs.children().on("touchend",function(a){b.change.call(b,a,this)}),this.lightbox.thumbs.on("touchstart",function(a){b.startTouch.call(b,a,b.lightbox.thumbs)}),this.lightbox.thumbs.on("touchend",function(a){b.endTouch.call(b,a,b.lightbox.thumbs)}),this.lightbox.thumbs.on("touchmove",function(a){b.moveTouch.call(b,a,b.lightbox.thumbs)}))},deregisterEvents:function(){this.lightbox.close.off(),this.lightbox.next.off(),this.lightbox.prev.off(),jQuery(c).off("resize"),this.lightbox.content.off(),this.lightbox.thumbs.children().off(),this.lightbox.thumbs.off()}}),$.fn.indexof=function(c){for(var b,a=0;a<jQuery(this).length;a++)jQuery(this).get(a)==c&&(b=a);return b},$.fn.lightboxed=function(d){var a=function(){$.data(this,"plugin_"+f)||$.data(this,"plugin_"+f,new b(jQuery(this),d))},c={};return jQuery(this).filter("[rel]").each(function(){var a=jQuery(this).attr("rel");c.hasOwnProperty(a)?c[a].push(this):c[a]=[this]}),jQuery.each(c,a),jQuery.each(jQuery(this).filter(":not([rel])"),a),this},$.fn.indexOf=function(a){var b=!1,c=jQuery(a)[0].outerHTML;return jQuery(this).each(function(a,d){if(jQuery(this)[0].outerHTML==c)return b=a,!1}),b},$.fn.lightboxed.defaults={lightboxOpenClass:a+"lightbox_open",lightboxCloseClass:a+"lightbox_close",delay:500,loop:!0,thumbs:{size:50,spacing:10},content:{spacing:10},swipe:{horizontalOffset:.2,verticalOffset:.33}}}(jQuery,window,document),jQuery(window).on("load",function(){jQuery(".lightboxed").lightboxed()})